### 测试一下商家的消息推送.

查了一下,这部分问题.发现了几个流程有问题.
1. push系统 , 由于push系统的基础数据进行了一部分改造(我没有参与),对现在的业务造成了一定的影响.(商家端加了
新接口,数据写在新表中.导致基础信息获取不对.)已经修复.
2. 新接口的调用方式,是在 app 登陆之后,杀掉进程再进入app主界面才会调用,(操作比较繁琐,我也是摸索了
好几次才发现这个潜在的规律.)
3. 在app内,按home建退出程序,大概需要2min才会改变后端的在线状态,这个状态改变之后,相关的消息才会
走push服务,进行推送.
4. 设备切换账号,token更新不及时.导致推送失败,和第三点关系比较密切.这个和客户端相关,建议后面进行优化相关流程.
5. 如果IM 网页在线,之前的逻辑就不给发送消息给app端,目前这个逻辑已经优化,不管web端是否在线,都会给离线
的客户端发送push消息.目前已经处理上线.

### 商家操作
建议商家重新登陆app,杀掉,再重新打开app,这样切到后台最多2min之后,就可以收到推送消息.

### 处理结果
处理了上面可以处理的问题.需要客户端参与的流程优化,只能等待发版迭代.
已经和QA一起测试过,操作正常的话,基本可以收到push,包括IM和系统消息,支付相关,延迟也不会太久,除
第三方服务无法控制之外,我们的服务基本稳定.


### 关于push的一些优化点。
1. 增加数据报表，增加数据报表程序，每天可以对发送的数据进行一个汇总。可以和历史数据进行对比，这样可以判断服务的稳定
程度。数据来源于push的log。通过对push的log分析得出。 并且将内容以邮件的方式发送,给相关人员。
2. 增加监测环节，增加一个监测模块，在时间间隔之内监测服务是否正常，如果不正常，通知对应的人员。并记录故障事件。
邮件通知相关rd。
3. 优化push的相关代码，增加系统的稳定性。减小出错的可能性。

4. 处理历史log,每天都需要将数据存放在历史log目录中.重构项目架构,完善项目功能.
相关技术

用shell脚本进行结果统计，给项目中增加发送邮件的模块，重构一下push项目。

logs 目录下只保留3天内的日志内容,其余的log要搬到外部的log目录.
```
找出最近3天的所有日志.

```


